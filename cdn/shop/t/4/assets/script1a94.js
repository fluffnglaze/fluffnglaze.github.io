const lenis=new Lenis;gsap.registerPlugin(ScrollTrigger),lenis.on("scroll",ScrollTrigger.update),gsap.ticker.add(time=>{lenis.raf(time*1e3)}),gsap.ticker.lagSmoothing(0);const overlay=document.querySelector(".overlay"),menuOverlay=document.querySelector(".overlay-menu"),parallaxHeros=document.querySelectorAll(".Hero_Wrapper .Parallax_Back_Hero");window.innerWidth>768&&parallaxHeros.forEach(parallaxHero2=>{gsap.timeline({scrollTrigger:{trigger:parallaxHero2,start:"top top",end:"bottom top",scrub:!0}}).to(parallaxHero2,{ease:"none",y:"70%"}),gsap.timeline({scrollTrigger:{trigger:parallaxHero2,start:"top top",end:"bottom top",scrub:!0}}).to(parallaxHero2.querySelector("img"),{ease:"none",scale:"1.4"}),gsap.timeline({scrollTrigger:{trigger:parallaxHero2,start:"top top",end:"bottom top",scrub:!0}}).to(parallaxHero2.closest(".Hero_Wrapper"),{ease:"none",borderRadius:"0 0 5rem 5rem",minHeight:"90vh"})});const startParallaxBacks=document.querySelectorAll(".Parallax_Back_Start");startParallaxBacks.forEach(item=>{if(parallaxHeros[0]!=item){const displacement=item.dataset.pDisplace||"50%";gsap.timeline({scrollTrigger:{trigger:item,start:"top top",end:"bottom top",scrub:!0}}).to(item,{ease:"none",y:displacement})}});const parallaxBacks=document.querySelectorAll(".Parallax_Back");parallaxBacks.forEach(item=>{if(parallaxHeros[0]!=item){const displacement=item.dataset.pDisplace||"50%";gsap.timeline({scrollTrigger:{trigger:item,start:"top bottom",end:"bottom top",scrub:!0}}).to(item,{ease:"none",y:displacement})}});const parallaxFronts=document.querySelectorAll(".Parallax_Front");parallaxFronts.forEach(item=>{const displacement=item.dataset.pDisplace||"-75%";gsap.timeline({scrollTrigger:{trigger:item,start:"top bottom",end:"bottom top",scrub:!0}}).to(item,{ease:"none",y:displacement})});const parallaxHero=document.querySelector(".Hero_Wrapper.Parallax_Wrapper"),parallaxHeroFronts=document.querySelectorAll(".Parallax_Hero_Front");parallaxHeroFronts.forEach(item=>{const displacement=item.dataset.pDisplace||"-75%";gsap.timeline({scrollTrigger:{trigger:parallaxHero,start:"top top",end:"bottom top",scrub:!0}}).to(item,{ease:"none",y:displacement})});const darkSections=document.querySelectorAll(".Dark_Section");darkSections.forEach(section=>{gsap.timeline({scrollTrigger:{trigger:section,start:"top top+=20px",end:"bottom top+=20px",onEnter:()=>{setMenuColor("var(--beige)")},onEnterBack:()=>{setMenuColor("var(--beige)")},onLeave:()=>{setMenuColor("var(--dark)")},onLeaveBack:()=>{setMenuColor("var(--dark)")}}})});const darkLogo=document.querySelector(".Logo_Dark"),lightLogo=document.querySelector(".Logo_Light"),menu=document.querySelector("header");function setMenuColor(color){document.documentElement.style.setProperty("--menu-text-color",color),color=="var(--beige)"?(darkLogo.classList.remove("Shown"),lightLogo.classList.add("Shown"),menu.classList.remove("Filled")):color=="var(--dark)"&&(lightLogo.classList.remove("Shown"),darkLogo.classList.add("Shown"),menu.classList.add("Filled"))}const firstSection=document.querySelector("section");firstSection.classList.contains(".Dark_Section")||setMenuColor("var(--dark)");const imagesDisplayContainers=document.querySelectorAll(".Images_Display_Container");imagesDisplayContainers.forEach(container=>{gsap.timeline({scrollTrigger:{trigger:container,start:"top bottom",onEnter:()=>{container.classList.add("Animate")}}})});const windowImages=document.querySelectorAll(".Window_Image");let currentDelay=0,currentParent=null;windowImages.forEach(windowImage=>{windowImage.closest("section")!=currentParent?(currentDelay=0,currentParent=windowImage.closest("section")):currentDelay+=.15;const limit=windowImage.querySelector(".Window_Image_Limit"),container=windowImage.querySelector(".Window_Image_Container img");let delay=currentDelay;if(!windowImage.classList.contains("No_Anim")){if(windowImage.classList.contains("Instant")){gsap.to(limit,{scrollTrigger:{trigger:windowImage,start:"top bottom-=100px"},ease:"power2.out",width:"100%",height:"100%",duration:.75,delay}),gsap.to(container,{scrollTrigger:{trigger:windowImage,start:"top bottom-=100px"},ease:"power1.out",scale:"1",duration:.8,delay});return}gsap.timeline({scrollTrigger:{trigger:windowImage,start:"top bottom",end:"bottom center+=200px",scrub:!0}}).to(limit,{ease:"power1.out",width:"100%",height:"100%"}),gsap.timeline({scrollTrigger:{trigger:windowImage,start:"top bottom",end:"top center",scrub:!0}}).to(container,{ease:"linear",scale:"1"})}});const collectionCTAButtons=document.querySelectorAll(".Collections_CTA_Button");collectionCTAButtons.forEach(button=>{gsap.to(button,{scrollTrigger:button,scale:1.2,ease:"expo.out",duration:1.5})});const dynamicSeparators=document.querySelectorAll(".Dynamic_Separator"),footer=document.querySelector("footer");dynamicSeparators.forEach(separator=>{const path=separator.querySelector(".Dynamic_Path"),target=path.dataset.target;gsap.timeline({scrollTrigger:{trigger:footer,start:"top bottom+=150px",end:"bottom bottom",scrub:!0}}).to(path,{ease:"linear",attr:{d:target}})});const arches=document.querySelectorAll(".Arches_Display_Container .Window_Image");for(let i=0;i<3;i++){let pattern=coinFlip();for(let index=i*arches.length/6;index<i*arches.length/6+arches.length/6;index++){const arch=arches[index],archCopy=arches[index+arches.length/2];pattern?(random=index%2,arch.style.setProperty("--random",random),archCopy.style.setProperty("--random",random)):(random=(index+1)%2,arch.style.setProperty("--random",random),archCopy.style.setProperty("--random",random))}}function coinFlip(){return Math.random()<.5}const searchPopup=document.querySelector(".Search_Popup"),toggleSearchLink=document.querySelector("*[data-action='toggle-search']"),closeSearchLink=document.querySelector("*[data-action='close-search']");toggleSearchLink.addEventListener("click",toggleSearchPopup),closeSearchLink.addEventListener("click",closeSearchPopup);function toggleSearchPopup(e){e&&e.preventDefault(),menu.classList.toggle("FilledSearch"),searchPopup.classList.toggle("open"),menuOverlay.classList.toggle("open")}function closeSearchPopup(e){e&&e.preventDefault(),menu.classList.remove("FilledSearch"),searchPopup.classList.remove("open"),menuOverlay.classList.remove("open")}const openDrawerLink=document.querySelector("*[data-action='open-cart']"),closeDrawerLink=document.querySelector("*[data-action='close-cart']"),cartDrawer=document.querySelector(".Cart_Drawer");openDrawerLink.addEventListener("click",openCartDrawer),closeDrawerLink.addEventListener("click",closeCartDrawer);function openCartDrawer(e){e&&e.preventDefault(),cartDrawer.classList.add("open"),overlay.classList.add("open"),lenis.stop(),document.querySelector("body").style.overflowY="hidden",setTimeout(()=>{window.dispatchEvent(new Event("cart:slide"))},800)}function closeCartDrawer(e){e&&e.preventDefault(),document.querySelector("body").style.overflowY="auto",lenis.start(),cartDrawer.classList.remove("open"),overlay.classList.remove("open"),setTimeout(()=>{window.dispatchEvent(new Event("cart:slide"))},800)}const cartContainer=document.querySelector(".Cart_Drawer_Content"),cartPriceContainer=document.querySelector(".Cart_Checkout_Price"),cartNotif=document.querySelector(".Header_CartDot");updateCart();async function updateCart(action="nothing"){let cart=await getCart();switch(cart.items.length>0?cartNotif.classList.add("is-visible"):cartNotif.classList.remove("is-visible"),cartContainer.innerHTML="",cartPriceContainer.textContent=`$${(cart.total_price/100).toFixed(2)}`,cart.items.forEach(item=>{let itemElem=getCartItemDOM(item);cartContainer.appendChild(itemElem)}),initCart(),action){case"open":openCartDrawer();break;default:break}}async function getCart(){return await fetch("/cart.js",{method:"GET"}).then(res=>res.json()).catch(e=>{console.error("Error:",e)})}function getCartItemDOM(item){let thumbnailId=allProductIds.indexOf(item.product_id),img=item.featured_image.url;thumbnailId>=0&&(img=allProductThumbnails[thumbnailId]);const html=`<div class="Cart_Item_Content"><a href="${item.url}" class="Cart_Item_Image Fluid"><img src="${img}" width=400 /></a><div class="Cart_Item_Infos"><h3 class="Cart_Item_Title"><a href="${item.url}">${item.title}</a></h3><span class="Price">$ ${(parseInt(item.price)*.01).toFixed(2)}</span><div class="Cart_Item_Change"><div class="Quantity_Selector"><div class="Minus_Button Quantity_Selector_Button"><span>-</span></div><input type="number" name="quantity" value=${item.quantity} pattern="[0-9]*" aria-label="Quantity"><div class="Plus_Button Quantity_Selector_Button"><span>+</span></div></div><a class="Grow_Anim" href="/cart/change?id=${item.key}&quantity=0" data-action="remove-cart-item"><span class="word"><span class="letter">R</span><span class="letter">e</span><span class="letter">m</span><span class="letter">o</span><span class="letter">v</span><span class="letter">e</span></span></a></div></div></div></div>`;let wrapper=document.createElement("div");wrapper.classList.add("Cart_Item"),wrapper.innerHTML=html;const quantityElem=wrapper.querySelector(".Quantity_Selector input"),minusButton=wrapper.querySelector(".Minus_Button"),plusButton=wrapper.querySelector(".Plus_Button");minusButton.addEventListener("click",minus),plusButton.addEventListener("click",plus);async function minus(){let value=parseInt(quantityElem.value);value==1?(await fetch(`/cart/change?id=${item.key}&quantity=0`).then(response=>response).catch(e=>console.error("Error:",e))).status==200&&fireCartUpdate():value>1&&(await fetch(`/cart/change?id=${item.key}&quantity=${value-1}`).then(response=>response).catch(e=>console.error("Error:",e))).status==200&&(quantityElem.value=value-1,fireCartUpdate())}async function plus(){let value=parseInt(quantityElem.value);(await fetch(`/cart/change?id=${item.key}&quantity=${value+1}`).then(response=>response).catch(e=>console.error("Error:",e))).status==200&&(quantityElem.value=value+1,fireCartUpdate())}return wrapper}window.addEventListener("cart_changed",e=>{updateCart("open")});function initCart(){document.querySelectorAll('a[data-action="remove-cart-item"]').forEach(btn=>{btn.addEventListener("click",onRemoveCartBtnClick)})}async function onRemoveCartBtnClick(e){e.preventDefault();let res=await removeCartItem(e.target.closest("a[data-action]").href);res.status==200&&fireCartUpdate(res.json())}async function removeCartItem(deleteUrl){return await fetch(deleteUrl).then(res=>res).catch(e=>{console.error("Error:",e)})}const quantitySelectors=document.querySelectorAll(".Quantity_Selector");quantitySelectors.forEach(selector=>{const lineItem=selector.closest(".Cart_Section .Cart_Item"),minus=selector.querySelector(".Minus_Button"),plus=selector.querySelector(".Plus_Button"),input=selector.querySelector("input");let count=parseInt(input.value);plus.addEventListener("click",add),minus.addEventListener("click",remove);async function add(){if(count=Math.min(999,count+1),input.value=count,input.dispatchEvent(new Event("change")),lineItem){let value=parseInt(count);value==0?(await fetch(`/cart/change?id=${lineItem.dataset.key}&quantity=0`).then(response=>response).catch(e=>console.error("Error:",e))).status==200&&location.reload():value>0&&(await fetch(`/cart/change?id=${lineItem.dataset.key}&quantity=${value}`).then(response=>response).catch(e=>console.error("Error:",e))).status==200&&location.reload()}}async function remove(){if(count=Math.max(1,count-1),input.value=count,input.dispatchEvent(new Event("change")),lineItem){let value=parseInt(count);(await fetch(`/cart/change?id=${lineItem.dataset.key}&quantity=${value}`).then(response=>response).catch(e=>console.error("Error:",e))).status==200&&location.reload()}}});const addCartForms=document.querySelectorAll("form[data-action='add-to-cart']");addCartForms.forEach(form=>{form.addEventListener("submit",addToCart);async function addToCart(e){if(e.preventDefault(),!e.isTrusted)return;let id=form.querySelector("input[name='id']").value,quantity=form.querySelector("input[name='quantity']").value;isNaN(quantity)&&console.error("Error:",new Error("Given quantity is not a number"));let res=await fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:[{id,quantity}]})}).then(response=>response).catch(error=>{console.error("Error:",error)});res.status===200&&fireCartUpdate(res.json())}});function fireCartUpdate(details){window.dispatchEvent(new CustomEvent("cart_changed",{details,bubbles:!0}))}const tabs=document.querySelectorAll(".Collection_Browser_Tab_Button"),containers=document.querySelectorAll(".Collection_Browser_Products_Container");let canUseTabs=!0;tabs.forEach(tab=>{const id=tab.dataset.id,container=document.querySelector(`.Collection_Browser_Products_Container[data-id='${id}']`);tab.addEventListener("click",onTabClick);function onTabClick(e){canUseTabs&&!tab.classList.contains("Selected")&&(canUseTabs=!1,updateTabs(e),updateContainers(e))}function updateTabs(e){tabs.forEach(t=>{t!=tab&&t.classList.remove("Selected")}),tab.classList.add("Selected")}function updateContainers(e){containers.forEach(c=>{if(c!=container&&c.classList.contains("Open")){const products=c.querySelectorAll(".Collection_Browser_Product_Page.Open .Collection_Browser_Product form");setTimeout(()=>{container.classList.add("Open"),c.classList.remove("Open")},1200),hideProducts(products)}});const newProducts=container.querySelectorAll(".Collection_Browser_Product_Page.Open .Collection_Browser_Product form");showProducts(newProducts,()=>{canUseTabs=!0,ScrollTrigger.refresh(),window.dispatchEvent(new Event("resize"))})}});function hideProducts(products){gsap.to(products,{onStart:()=>{products.forEach(p=>{p.style.transformOrigin="top left"})},stagger:{amount:.4},duration:.5,y:"101%",rotation:15,ease:"power3.in"})}function showProducts(products,callback){products.forEach(p=>{p.style.transformOrigin="top right"}),gsap.fromTo(products,{y:"101%",rotation:-15},{delay:1.2,stagger:{amount:.4},duration:.5,y:"0%",rotation:0,ease:"expo.out",onComplete:callback})}containers.forEach(container=>{const allPages=container.querySelectorAll(".Collection_Browser_Product_Page"),prevBtn=container.querySelector(".Collection_Browser_Arrow.Left");prevBtn.addEventListener("click",prev);const nextBtn=container.querySelector(".Collection_Browser_Arrow.Right");nextBtn.addEventListener("click",next);let currentPage=0;function prev(){changePage(currentPage-1)}function next(){changePage(currentPage+1)}function changePage(p){p>=0&&p<allPages.length&&(currentPage=p,canUseTabs=!1,update())}function update(){allPages.forEach(p=>{if(p.dataset.page!=currentPage){const products=p.querySelectorAll(".Collection_Browser_Product form");hideProducts(products),setTimeout(()=>{p.classList.remove("Open")},1200)}else if(p.dataset.page==currentPage){const products=p.querySelectorAll(".Collection_Browser_Product form");showProducts(products,()=>{canUseTabs=!0,ScrollTrigger.refresh(),window.dispatchEvent(new Event("resize"))}),setTimeout(()=>{p.classList.add("Open")},1200)}}),currentPage==0?prevBtn.classList.add("Disabled"):prevBtn.classList.remove("Disabled"),currentPage>=allPages.length-1?nextBtn.classList.add("Disabled"):nextBtn.classList.remove("Disabled")}update()});const anchorLinks=document.querySelectorAll("a[href*='#']");anchorLinks.forEach(link=>{link.href.includes("FeaturedAnchor")||link.hash.split("")[0]=="#"&&link.href!="#"&&link.addEventListener("click",e=>{e.preventDefault(),lenis.scrollTo(link.hash,{offset:-120})})});const fixedProductAdd=document.querySelector(".Product_Hero_Fixed"),fixedProductTarget=document.querySelector(".Product_Second_Image");if(fixedProductAdd!=null){let checkAnchor2=function(){let bounding=fixedProductTarget.getBoundingClientRect(),diff=windowHeight-bounding.bottom-windowBotPadding;diff>=0&&(fixedProductAdd.style.bottom=Math.max(0,diff)+"px")};var checkAnchor=checkAnchor2;let anchored=!1,windowBotPadding=window.innerWidth/25,windowHeight=window.innerHeight;window.addEventListener("resize",e=>{if(windowHeight!=window.innerHeight){windowHeight=window.innerHeight;return}windowBotPadding=window.innerWidth/25,windowHeight=window.innerHeight,fixedProductAdd.style.maxWidth=fixedProductTarget.getBoundingClientRect().width+"px"}),fixedProductAdd.style.maxWidth=fixedProductTarget.getBoundingClientRect().width+"px",lenis.on("scroll",e=>{checkAnchor2()})}const wordAnims=document.querySelectorAll(".Cool_Text_Anim.Words"),format=/[^A-Za-zÀ-ÖØ-öø-ÿ!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~]+/g;wordAnims.forEach(anim=>{let text=anim.textContent.split(" ");text.ariaLabel=anim.textContent,anim.textContent="";let spans=[];text.forEach(t=>{const newT=t.replace(format,"");if(newT.length!==0){let span=document.createElement("span");span.ariaHidden="true",span.classList.add("Word");let innerSpan=document.createElement("span");innerSpan.textContent=newT,spans.push(innerSpan),span.appendChild(innerSpan),anim.appendChild(span)}}),gsap.from(spans,{delay:.3,scrollTrigger:anim,stagger:{amount:.5},ease:"expo.out",duration:1.5,rotation:12,y:"101%"})});const lineAnims=document.querySelectorAll(".Cool_Text_Anim.Lines");lineAnims.forEach(anim=>{const factor=1.0454545454545454;let lineWidth=anim.getBoundingClientRect().width,text=anim.textContent.split(" ");anim.ariaLabel=anim.textContent;let spans=[];const fontWeight=window.getComputedStyle(anim,null).getPropertyValue("font-weight")||"normal";let fontSize=window.getComputedStyle(anim,null).getPropertyValue("font-size");const fontFamily=window.getComputedStyle(anim,null).getPropertyValue("font-family")||"Times New Roman";let counter=0,currentSpan=document.createElement("span");setupLines();function getLineSpan(innerSpan){let span=document.createElement("span");return span.classList.add("Line"),span.ariaHidden="true",span.appendChild(innerSpan),span}let pageWidth=window.innerWidth;window.addEventListener("resize",onResizeLines);function onResizeLines(){pageWidth!=window.innerWidth&&(spans=[],size=window.getComputedStyle(anim,null).getPropertyValue("font-size"),lineWidth=anim.getBoundingClientRect().width,counter=0,currentSpan=document.createElement("span"),setupLines())}function setupLines(){anim.innerHTML="",text.forEach(t=>{if(t.replace(format,"").length!==0){if(counter+=getTextWidth(t)*factor,counter>=lineWidth){let outerSpan=getLineSpan(currentSpan);counter=getTextWidth(t)*factor,spans.push(currentSpan),anim.appendChild(outerSpan),currentSpan=document.createElement("span")}else counter+=parseInt(fontSize)*1.5;let span=document.createElement("span");span.textContent=t,currentSpan.appendChild(span)}}),spans.push(currentSpan),anim.appendChild(getLineSpan(currentSpan)),gsap.from(spans,{delay:.3,scrollTrigger:anim,stagger:{amount:.3},ease:"expo.out",duration:1.2,rotation:12,y:"101%"})}function getTextWidth(input){return inputText=input,font=`${fontWeight} ${fontSize} ${fontFamily}`,canvas=document.createElement("canvas"),context=canvas.getContext("2d"),context.font=font,width=context.measureText(inputText).width,width}});const animsGrow=document.querySelectorAll(".Cool_Anim.Grow");animsGrow.forEach(anim=>{gsap.from(anim,{scrollTrigger:anim,duration:1,scale:.6,delay:.5,ease:"expo.out"})});const fadeAnims=document.querySelectorAll(".Cool_Anim.Fade");fadeAnims.forEach(anim=>{gsap.from(anim,{scrollTrigger:anim,duration:1,opacity:0,y:"4rem",delay:.5,ease:"expo.out"})});const fadeAnimsMultiple=document.querySelectorAll(".Cool_Anim.Fade.Multiple");fadeAnimsMultiple.forEach(anim=>{const elems=anim.querySelectorAll(".Cool_Anim>div");gsap.from(elems,{scrollTrigger:anim,stagger:{amount:.4},duration:1,opacity:0,y:"4rem",delay:.5,ease:"expo.out"})});const menuGrowAnims=document.querySelectorAll(".Grow_Anim");menuGrowAnims.forEach(anim=>{const text=anim.textContent.split("");anim.ariaLabel=anim.textContent,anim.textContent="";let wordSpan=document.createElement("span");wordSpan.classList.add("word"),wordSpan.ariaHidden=!0;let wordLength=0;const fontWeight=window.getComputedStyle(anim,null).getPropertyValue("font-weight")||"normal";let fontSize=window.getComputedStyle(anim,null).getPropertyValue("font-size");const fontFamily=window.getComputedStyle(anim,null).getPropertyValue("font-family")||"Times New Roman";text.forEach(letter=>{if(letter==" ")wordSpan.style.minWidth=wordLength+"px",anim.appendChild(wordSpan),wordSpan=document.createElement("span"),wordSpan.classList.add("word"),wordSpan.ariaHidden=!0,wordLength=0;else{const span=document.createElement("span");span.classList.add("letter"),span.textContent=letter,wordSpan.appendChild(span),wordLength+=getTextWidth(letter),wordLength+=3}}),wordSpan.innerHTML!=""&&(wordSpan.style.minWidth=wordLength+"px",anim.appendChild(wordSpan));function getTextWidth(input){return inputText=input,font=`${fontWeight} ${fontSize} ${fontFamily}`,canvas=document.createElement("canvas"),context=canvas.getContext("2d"),context.font=font,width=context.measureText(inputText).width,width}});const textPathAnims=document.querySelectorAll(".Collections_CTA_Title_SVG");textPathAnims.forEach(anim=>{const text=anim.querySelector("textPath");gsap.timeline({scrollTrigger:{trigger:anim,start:"top bottom+=40",end:"bottom top",scrub:!0}}).to(text,{ease:"linear",attr:{startOffset:20}})});let pageIsLoaded=!1;const pageLoadAnim=gsap.timeline({paused:!0}),pageHideAnim=gsap.timeline({paused:!0}),pageLoad=document.querySelector(".pageload .anim-path"),pageHide=document.querySelector(".pagehide .anim-path");pageLoadAnim.to(pageLoad,{duration:1.2,attr:{d:pageLoad.dataset.endPath},ease:"power2.inOut"}),pageHideAnim.to(pageHide,{duration:1.2,attr:{d:pageHide.dataset.endPath},ease:"power2.inOut"}),document.addEventListener("DOMContentLoaded",()=>{onHeroLoaded(()=>{pageLoadAnim.play(),clearInterval(pageLoadInterval),initDynamicFavicon()})}),window.addEventListener("unload",function(event){pageIsLoaded=!0});const pageLinks=document.querySelectorAll("a");pageLinks.forEach(link=>{const href=link.href,attr=Array.from(link.attributes),hasData=a=>a.name.includes("data");attr.some(hasData)||!href.includes(window.location.origin)||href==window.location.href||href.includes("#")||link.addEventListener("click",function(e){e.preventDefault(),pageHideAnim.play(),setTimeout(()=>{window.location=href},800)})});let pageLoadInterval=setInterval(()=>{pageIsLoaded&&onHeroLoaded(()=>{pageLoadAnim.play(),clearInterval(pageLoadInterval),initDynamicFavicon()})},200);async function onHeroLoaded(callback){const heroImage=document.querySelector(".Hero_Back_Img img");if(heroImage==null||heroImage.complete){callback();return}let timeout=setTimeout(callback,2e3);heroImage.addEventListener("load",e=>{clearTimeout(timeout),callback()}),heroImage.addEventListener("error",()=>{clearTimeout(timeout),callback()})}const parallaxImgs=document.querySelectorAll(".Parallax_Image");parallaxImgs.forEach(img=>{gsap.timeline({scrollTrigger:{trigger:img,start:"top bottom",end:"bottom top",scrub:!0}}).from(img,{ease:"linear",y:"-20%"})});const timelines=document.querySelectorAll(".Timeline_Line");timelines.forEach(timeline=>{const inner=timeline.querySelector(".Timeline_Inner"),anchors=timeline.querySelectorAll(".Timeline_Anchor");gsap.timeline({scrollTrigger:{trigger:timeline,start:"top center+=100px",end:"bottom center+=100px",scrub:!0}}).to(inner,{ease:"linear",height:"100%"}),anchors.forEach(a=>{ScrollTrigger.create({trigger:a,start:()=>"top center+=100px",end:()=>"bottom center+=100px",onEnter:()=>a.classList.add("Passed"),onLeaveBack:()=>a.classList.remove("Passed")})})});class Queue{constructor(){this.queue=[]}enqueue(element){return this.queue.push(element)}dequeue(){if(this.queue.length>0)return this.queue.shift()}peek(){return this.queue[this.queue.length-1]}size(){return this.queue.length}isEmpty(){return this.queue.length==0}clear(){this.queue=[]}}const imageDisplayContainers=document.querySelectorAll(".Images_Display_Container");imageDisplayContainers.forEach(container=>{let imagesQueue=new Queue;const nodeQueue=container.querySelector(".Images_Queue"),baseQueue=nodeQueue.querySelectorAll("img"),allDisplays=container.querySelectorAll(".Image_Display");baseQueue.forEach(node=>{imagesQueue.enqueue(node)}),allDisplays.forEach(display=>{display.appendChild(imagesQueue.dequeue())});let interval=setInterval(changeImages,8e3);function changeImages(){allDisplays.forEach((display,i)=>{let current=display.querySelector("img"),next=imagesQueue.dequeue();next.classList.add("Left"),next.classList.remove("Behind"),display.appendChild(next),setTimeout(()=>{next.classList.remove("Left"),current.classList.add("Behind")},200+i*120),setTimeout(()=>{nodeQueue.appendChild(current),imagesQueue.enqueue(current)},5e3)})}});const favicon=document.querySelector("#favicon"),baseHref=favicon.href;let faviconInterval;function initDynamicFavicon(){setTimeout(()=>{clearInterval(faviconInterval);let i=1;faviconInterval=setInterval(()=>{switch(i){case 1:favicon.setAttribute("href",window.favicon1);break;case 2:favicon.setAttribute("href",window.favicon2);break;default:favicon.setAttribute("href",baseHref);break}i++,i>2&&(i=0)},1200)},1e3)}const mouseTrackers=document.querySelectorAll(".Relative_To_Mouse");document.addEventListener("DOMContentLoaded",initMouseTrackers);function initMouseTrackers(){mouseTrackers.forEach(tracker=>{tracker.addEventListener("mouseenter",onEnterLeave),tracker.addEventListener("mouseleave",onEnterLeave);let position=null;window.addEventListener("resize",()=>{position=getCoords(tracker)}),window.addEventListener("scroll",()=>{position=getCoords(tracker)}),window.addEventListener("cart:slide",()=>{position=getCoords(tracker)});function onEnterLeave(e){position==null&&(position=getCoords(tracker)),tracker.style.setProperty("--mouse-x",`${e.pageX-position.left}px`),tracker.style.setProperty("--mouse-y",`${e.pageY-position.top}px`)}});function getCoords(elem){let box=elem.getBoundingClientRect(),body=document.body,docEl=document.documentElement,scrollTop=window.pageYOffset||docEl.scrollTop||body.scrollTop,scrollLeft=window.pageXOffset||docEl.scrollLeft||body.scrollLeft,clientTop=docEl.clientTop||body.clientTop||0,clientLeft=docEl.clientLeft||body.clientLeft||0,top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft;return{top:Math.round(top),left:Math.round(left)}}}const dynamicPrices=document.querySelectorAll(".Dynamic_Price");dynamicPrices.forEach(price=>{const span=price.querySelector("span"),basePrice=Number(span.textContent),quantity=price.closest(".Product_Form").querySelector(".Quantity_Selector input");quantity.addEventListener("change",updatePrice);function updatePrice(e){span.textContent=(basePrice*quantity.value).toFixed(2)}});const burgerMenu=document.querySelector(".Menu_Drawer"),burgerBtns=document.querySelectorAll("a[data-action*='open-side-menu'], button[data-action*='open-side-menu']"),closeMenuBtns=document.querySelectorAll("a[data-action*='close-side-menu'], button[data-action*='close-side-menu']");burgerBtns.forEach(btn=>{btn.addEventListener("click",onBtnClick);function onBtnClick(e){e.preventDefault(),burgerMenu.classList.add("open")}}),closeMenuBtns.forEach(btn=>{btn.addEventListener("click",onBtnClick);function onBtnClick(e){e.preventDefault(),burgerMenu.classList.remove("open")}});const allCollectionProducts=document.querySelectorAll(".Collection_Product");allCollectionProducts.forEach((product,id)=>{let pos=id%3,rowBros=[];switch(pos){case 0:allCollectionProducts.length>id+1&&rowBros.push(allCollectionProducts[id+1]),allCollectionProducts.length>id+2&&rowBros.push(allCollectionProducts[id+2]);break;case 1:rowBros.push(allCollectionProducts[id-1]),allCollectionProducts.length>id+1&&rowBros.push(allCollectionProducts[id+1]);break;case 2:rowBros.push(allCollectionProducts[id-1]),rowBros.push(allCollectionProducts[id-2]);break;default:break}let maxHeight=product.querySelector(".Product_Item_Title").getBoundingClientRect().height;rowBros.forEach(bro=>{maxHeight=Math.max(maxHeight,bro.querySelector(".Product_Item_Title").getBoundingClientRect().height)}),rowBros.forEach(bro=>{bro.querySelector(".Product_Item_Title").style.height=maxHeight+"px"})});const productPageSections=document.querySelectorAll(".Product_Page_Section");productPageSections.forEach(section=>{const variantsJSON=JSON.parse(section.dataset.productInfo),price=section.querySelector(".Product_Price"),form=section.querySelector(".Product_Form"),id=form.querySelector("input[type*='hidden']"),options=form.querySelectorAll("select");form.addEventListener("change",()=>{const selectedVariant=variantsJSON.find(v=>{let result=!0;return options.forEach((o,i)=>{v[`option${i+1}`]!=o.value&&(result=!1)}),result});id.value=selectedVariant.id,price.textContent=`$${(selectedVariant.price/100).toFixed(2)}`})});const productMediaCarousels=document.querySelectorAll(".Product_Media");productMediaCarousels.forEach(carousel=>{const mainMedia=Array.from(carousel.querySelectorAll(".Main_Image")),toggles=Array.from(carousel.querySelectorAll(".Additional_Image"));let activeMedia=mainMedia.find(m=>m.classList.contains("Active"));const defaultId=mainMedia.indexOf(activeMedia);let activeToggle=toggles[defaultId];activeToggle.classList.add("Active");let canClick=!0;function setDefault(){prepareMedias(),setActive(defaultId)}function setActive(id){prepareMedias(),activeMedia=mainMedia[id],activeMedia.classList.add("Active"),activeToggle=toggles[id],activeToggle.classList.add("Active")}function prepareMedias(){canClick=!1;const lastMedia=activeMedia,lastToggle=activeToggle;lastMedia.classList.add("Deactive"),lastToggle.classList.remove("Active"),setTimeout(()=>{lastMedia.classList.remove("Active"),lastMedia.classList.remove("Deactive"),canClick=!0},1010)}toggles.forEach((t,i)=>{t.addEventListener("click",()=>{canClick&&t.classList.contains("Active")&&i!=defaultId?setDefault():canClick&&!t.classList.contains("Active")&&setActive(i)})})}),document.addEventListener("DOMContentLoaded",newsletterConfirm);const generalPopup=document.querySelector(".Popup");function newsletterConfirm(e){const queryString=window.location.search,urlParams=new URLSearchParams(queryString);if(urlParams.get("customer_posted")){const status=urlParams.get("customer_posted")=="true";setTimeout(()=>{popup(status?"You have successfully subscribed to the newsletter":"There was an issue with your newsletter subscription, please try again later")},1e3)}}function popup(string){generalPopup.querySelector("span").textContent=string,generalPopup.classList.add("Active");const height=generalPopup.offsetHeight;document.querySelector("header").style.top=`${height}px`,setTimeout(()=>{generalPopup.classList.remove("Active"),document.querySelector("header").style.top="0"},5e3)}const checkoutBtns=document.querySelectorAll(".Cart_Checkout_Button");checkoutBtns.forEach(btn=>{btn.addEventListener("click",onCheckout)});const isConditional=!1;async function onCheckout(e){if(e.preventDefault(),window.isDownForMaintenance){popup(window.maintenanceMessage);return}if(!isConditional){openDatePicker();return}let hasCake=!1;const cart=await getCart();cart.items.forEach(item=>{cakesCollection.includes(item.product_id)&&(openDatePicker(),hasCake=!0)}),!hasCake&&cart.items.length>0&&(window.location="/checkout")}const datePicker=document.querySelector(".Date_Picker_Popup");if(datePicker!=null){let closeDatePickerPopup2=function(e){e&&e.preventDefault(),datePicker.classList.remove("Open")},validateFields2=function(){console.log(pleaseclearcache),errorDate.textContent="",errorTime.textContent="";const date=datePicker.querySelector("input[type='date']").value,time=datePicker.querySelector("input[type='time']").value,note=datePicker.querySelector("textarea").value,selectedDate=new Date(date+` ${time}`),startBlock=new Date(`${new Date().getFullYear()}-1-1`),endBlock=new Date(`${new Date().getFullYear()}-01-13`);if(console.log(selectedDate,startBlock,endBlock),selectedDate>=startBlock&&selectedDate<=endBlock)return errorDate.textContent=messages.errorHolidays,!1;const dateObj=new Date(date+` ${time}`);if(dateObj.getDay()==0||dateObj.getDay()==1)return errorDate.textContent=messages.errorDate,!1;const today=new Date;let workDays=0,nextDay=new Date(today);for(;nextDay<dateObj;)nextDay.setDate(nextDay.getDate()+1),nextDay.getDay()!=0&&nextDay.getDay()!=1&&nextDay<dateObj&&workDays++;if(workDays<1)return errorDate.textContent=messages.errorDateDelay,!1;const timeObj=new Date(`01/01/2000 ${time}`);return timeObj.getHours()<10||timeObj.getHours()>16||timeObj.getHours()==16&&timeObj.getMinutes()>30?(errorTime.textContent=messages.errorTime,!1):!0};var closeDatePickerPopup=closeDatePickerPopup2,validateFields=validateFields2;document.querySelector("*[data-action='close-date-picker']").addEventListener("click",closeDatePickerPopup2);const errorDate=document.querySelector(".Date_Error"),errorTime=document.querySelector(".Time_Error");datePicker.addEventListener("click",e=>{e.target==datePicker&&closeDatePickerPopup2()});const dateInput=datePicker.querySelector("input[type='date']"),timeInput=datePicker.querySelector("input[type='time']"),pleaseclearcache="321432993219231";dateInput.addEventListener("change",validateFields2),timeInput.addEventListener("change",validateFields2),datePicker.querySelector(".Cart_Checkout_Button").addEventListener("click",async e=>{if(e.preventDefault(),!validateFields2())return;const date=datePicker.querySelector("input[type='date']").value,time=datePicker.querySelector("input[type='time']").value,note=datePicker.querySelector("textarea").value;let completeNote=`Pickup date: ${date}
at ${time}
${note}`;(await fetch("/cart/update.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:completeNote})})).status==200&&(window.location="/checkout")})}function openDatePicker(){datePicker.classList.add("Open")}document.addEventListener("DOMContentLoaded",()=>{const menuMobile=document.querySelector(".Menu_Drawer_Links"),menu2=document.querySelector(".main-menu"),languageSelector=document.createElement("li"),languageSelectorLink=document.createElement("a");languageSelectorLink.classList.add("Grow_Anim"),languageSelectorLink.textContent=window.location.pathname.includes("/fr/")?"English":"Fran\xE7ais",languageSelectorLink.href=window.location.pathname.includes("/fr/")?window.location.pathname.replace("/fr/","/"):window.location.pathname.replace("/","/fr/"),languageSelector.appendChild(languageSelectorLink),menu2.appendChild(languageSelector),menuLanguageSelector=languageSelector.cloneNode(!0),menuLanguageSelector.querySelector("a").classList.add("Menu_Drawer_Link"),menuMobile.appendChild(menuLanguageSelector)}),document.addEventListener("DOMContentLoaded",()=>{const footerWrapper=document.querySelector(".Footer_Wrapper"),footer2=document.querySelector(".Footer_Wrapper footer");if(!footerWrapper)return;function onResize(){const footerHeight=footer2.offsetHeight;footerHeight<window.innerHeight?(document.querySelector(".Footer_Space").style.height=`${footerHeight}px`,footerWrapper.classList.add("Fixed")):(document.querySelector(".Footer_Space").style.height="0",footerWrapper.classList.remove("Fixed"))}onResize(),window.addEventListener("resize",onResize)}),document.addEventListener("DOMContentLoaded",()=>{window.location.hash=="#cart-open"&&openCartDrawer()});
//# sourceMappingURL=/cdn/shop/t/4/assets/script.js.map?v=113756912884130930701762157850
