const fps=60;class Canvas{constructor(htmlElem){this.ctx=htmlElem.getContext("2d"),this.crumbs=[],this.elapsed;let bounding=htmlElem.getBoundingClientRect();this.ctx.canvas.width=bounding.width,this.ctx.canvas.height=bounding.height,this.fpsInterval=1e3/60,this.then=Date.now(),this.startTime=this.then,this.loop()}onResize(htmlElem){let bounding=htmlElem.getBoundingClientRect();this.ctx.canvas.width=bounding.width,this.ctx.canvas.height=bounding.height}generateCrumbs(x,y,size,color){const minSize=size/7,maxSize=size/4,number=3;for(let i=0;i<number;i++){const randomSize=Math.random()*(maxSize-minSize)+minSize,crumb=new Crumb(x+i*minSize/2,y-minSize*number/4+i*minSize/2,randomSize,color,size/48);this.crumbs.push(crumb)}}draw(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.crumbs.forEach(crumb=>{crumb.draw(this.ctx)})}update(){this.crumbs.forEach(crumb=>{if(crumb.update(),crumb.alpha==0){const index=this.crumbs.indexOf(crumb);index>-1&&this.crumbs.splice(index,1)}if(crumb.y>this.ctx.height){const index=this.crumbs.indexOf(crumb);index>-1&&this.crumbs.splice(index,1)}})}loop(){this.now=Date.now(),this.elapsed=this.now-this.then,this.elapsed>this.fpsInterval&&(this.then=this.now-this.elapsed%this.fpsInterval,this.update(),this.draw()),requestAnimationFrame(this.loop.bind(this))}}const animationDuration=1,speedMultX=3,speedMultY=4,gravityDelta=.249;class Crumb{constructor(x,y,size,color,sizeFactor){this.x=x,this.y=y,this.radius=size/2,this.color=color,this.alpha=1,this.sizeFactor=Math.log(sizeFactor)+1,this.speedX=Math.random()*.5+.5,this.speedX=this.speedX*speedMultX,this.speedX=this.speedX*this.sizeFactor/2,this.speedY=Math.random()*.5+.5,this.speedY=-1*this.speedY*speedMultY,this.speedY=this.speedY*this.sizeFactor,this.rotation=Math.random()*2*Math.PI,this.rotationSpeed=Math.random()*2*Math.PI/60}update(){const delta=1/(animationDuration*60);this.alpha=Math.max(0,this.alpha-delta),this.x+=this.speedX,this.y+=this.speedY,this.rotation+=this.rotationSpeed,this.speedY+=gravityDelta*this.sizeFactor,this.speedX=Math.max(this.speedX-gravityDelta/8,.6)}draw(ctx){ctx.save(),ctx.translate(this.x,this.y),ctx.scale(this.radius*this.alpha,this.radius*this.alpha),ctx.rotate(this.rotation),ctx.translate(-1*this.x,-1*this.y),ctx.beginPath(),ctx.moveTo(this.x-.7636,this.y-.4727),ctx.quadraticCurveTo(this.x-.5091,this.y-.9818,this.x+.6182,this.y-.4727),ctx.quadraticCurveTo(this.x+1.1091,this.y-.1818,this.x+.5818,this.y+.4727),ctx.quadraticCurveTo(this.x+.2545,this.y+.8,this.x-.7636,this.y+.5636),ctx.quadraticCurveTo(this.x-1,this.y+.4545,this.x-.7636,this.y-.4727),ctx.fillStyle=this.color,ctx.fill(),ctx.restore()}}const frontCanvas=document.querySelector("#js-front-canvas"),backCanvas=document.querySelector("#js-back-canvas"),frontCTX=new Canvas(frontCanvas),backCTX=new Canvas(backCanvas),triggers=document.querySelectorAll(".Quantity_Selector_Button, .Hero_Float_Inner, .Product_Hero_Add_Button");triggers.forEach(trigger=>{const color=window.getComputedStyle(trigger,null).getPropertyValue("background-color");trigger.addEventListener("mouseenter",generate),trigger.addEventListener("click",generate);function generate(){const bound=trigger.getBoundingClientRect(),padding=bound.width*2/3,x=bound.x+padding,y=bound.y+window.scrollY+bound.height-padding;frontCTX.generateCrumbs(x,y,bound.width,color)}}),window.addEventListener("resize",()=>{frontCTX.onResize(frontCanvas),backCTX.onResize(backCanvas)});
//# sourceMappingURL=/cdn/shop/t/4/assets/canvas.js.map?v=106070043689631247281762157851
